# Generated by BehavEd
# ( "holocaust's pain script" )
# ( "calculate health percentage" )
stage = getZoneVar("stage" )
stage = iadd(stage, 1 )
health = getHealth("_OWNER_" )
healthmax = getHealthMax("_OWNER_" )
hamt = fdiv(health, healthmax )
# ( "figure out what the theshold for the next stage should be" )
thresh = fmul(stage, 0.500 )
hthresh = fsub(1.000000, thresh )
if hamt < hthresh
     setZoneVar("stage", stage )
     newhealth = fmul(hthresh, healthmax )
     setHealth("_OWNER_", newhealth )
     # ( "-- do the stuff --" )
     # ( "get angel to the center of the teleporter" )
     setInvulnerable("archangel", "TRUE" )
     setBossUndying("archangel", "FALSE" )
     setEnable("keep_out", "TRUE" )
     setEnable("center_trigger", "TRUE" )
     setPatternSequence("archangel", "archangel2" )
     # ( "turn on teleporter effects" )
     act("fx_telestart", "fx_telestart" )
     waittimed ( 3.000 )
     act("fx_teleloop", "fx_teleloop" )
     remove ( "fx_telestart", "fx_telestart" )
endif

