# Generated by BehavEd
# ( "This is the load script for the fourth perimeter zone" )
# ( "The player is allowed to leave the perimeter platform when the quest is done" )
once_only = getObjective("act4_obj_1b", "COMPLETE" )
if once_only == 0
     setRecallActive("FALSE" )
     setallaiactive("FALSE" )
     lockControls(8.700 )
     cameraFade(1.000, 0.000 )
     waittimed ( 1.000 )
     cameraToLocationAngles(" 6852.000 3791.000 226.000 ", " 6879.000 3874.000 178.000 ", 0.000 )
     setInvisible("_HERO1_", "TRUE" )
     setInvisible("_HERO2_", "TRUE" )
     setInvisible("_HERO3_", "TRUE" )
     setInvisible("_HERO4_", "TRUE" )
     act("sp_charlie01", "sp_charlie01" )
     waittimed ( 1.000 )
     cameraFade(0.000, 1.000 )
     waittimed ( 1.000 )
     sound (  "PLAY_SOUND", "zone_shared/special/teleporter_spawn", "_HERO1_", "" )
     waittimed ( 2.000 )
     setInvisible("_HERO1_", "FALSE" )
     setInvisible("_HERO2_", "FALSE" )
     setInvisible("_HERO3_", "FALSE" )
     setInvisible("_HERO4_", "FALSE" )
     waittimed ( 1.000 )
     # ( "*********************************************" )
     # ( "This turns off the teleporter" )
     spawn("starting_teleporter", "zone_to_perm5", "old_teleporter", " 0.000 0.000 0.000 ", " 0.000 0.000 0.000 " )
     waittimed ( 0.200 )
     remove ( "starting_teleporter", "starting_teleporter" )
     # ( "*********************************************" )
     waittimed ( 0.500 )
     cameraMove(" 6933.000 3920.000 196.000 ", 1.000 )
     cameraPan(" 0.000 30.700 90.000 ", 1.500, "FALSE" )
     waittimed ( 2.000 )
     setallaiactive("TRUE" )
     setFollowingHero("charlie", "TRUE" )
     startConversation("act4/perimeter/perimeter4/4_perimeter4_0010" )
else
     # ( "Platform trigger" )
     remove ( "trigger_array01", "trigger_array01" )
     remove ( "trigger_array02_a", "trigger_array02_a" )
     remove ( "trigger_array02_b", "trigger_array02_b" )
     remove ( "trigger_final_array", "trigger_final_array" )
     remove ( "tech_station_striking01", "tech_station_striking01" )
     # ( "This destroys the arrays" )
     killEntity("sat_1" )
     killEntity("sat_2" )
     killEntity("sat_3" )
     # ( "Theses are things on the last platform" )
     killEntity("destroyable_consoel" )
     setEnable("shield_console", "FALSE" )
     remove ( "generator_shield", "generator_shield" )
     remove ( "generator_death", "generator_death" )
     waittimed ( 0.100 )
     killEntity("array_generator" )
     remove ( "ss_sentinel_c01", "ss_sentinel_c01" )
     remove ( "ss_sentinel_c02", "ss_sentinel_c02" )
     remove ( "ss_sentinel_c03", "ss_sentinel_c03" )
     remove ( "ss_sentinel_c04", "ss_sentinel_c04" )
     remove ( "ss_sentinel_c05", "ss_sentinel_c05" )
endif
first_plat = getGameFlag("perimeter", 7 )
if first_plat == 1
     remove ( "plat1_trigger01", "plat1_trigger01" )
     remove ( "plat1_clip", "plat1_clip" )
endif

