# Generated by BehavEd
# ( "This is the load script for perimeter 3." )
setRecallActive("FALSE" )
setCurrentAct(4 )
perimeter3_defense_matrix = getObjective("act4_obj_1a", "COMPLETE" )
# ( "Mark this map as loaded" )
play_once = getGameFlag("perimeter", 1 )
if perimeter3_defense_matrix == 1
     # ( "Now all puzzle entities need to be removed or disabled" )
     remove ( "conv_sometimes", "conv_sometimes" )
     remove ( "deadscript01", "deadscript01" )
     remove ( "deadscript02", "deadscript02" )
     remove ( "deadscript03", "deadscript03" )
     remove ( "trigger_first_sentinel", "trigger_first_sentinel" )
     setEnable("tele_console", "FALSE" )
     # ( "This turns off the guns" )
     killEntity("big_guns_pp05" )
     killEntity("big_guns_pp06" )
     killEntity("big_guns_pp07" )
     killEntity("big_guns_pp08" )
     killEntity("big_guns_pp09" )
     killEntity("big_guns_pp10" )
     killEntity("big_guns_pp11" )
     killEntity("big_guns_pp12" )
     killEntity("big_guns_pp13" )
     killEntity("big_guns_pp14" )
     killEntity("big_guns_pp15" )
     killEntity("big_guns_pp16" )
     # ( "Now for the generators" )
     killEntity("shield_gen_per_1" )
     killEntity("shield_gen_per_2" )
     killEntity("shield_gen_per_3" )
     killEntity("shield_gen_per_4" )
     # ( "The player is allowed to live the perimeter platform when the quest is done" )
     setRecallActive("TRUE" )
elif play_once == 0
     setGameFlag("perimeter", 1, 1 )
     # ( "Plays sound of xjet landing" )
     sound (  "PLAY_SOUND", "zone_shared/special/xjet_power_down", "_HERO1_", "" )
     cameraFade(1.000, 0.000 )
     # ( "The long pause is for the sound file used above" )
     waittimed ( 2.000 )
     lockControls(0.000 )
     cameraFade(1.000, 0.000 )
     waittimed ( 2.000 )
     cameraFade(0.000, 1.000 )
     waittimed ( 1.000 )
     lockControls(0.100 )
     # ( "COMMENT THIS OUT" )
     # ( "COMMENT THIS IN" )
     timerStart(60.000, 30.000, "act4/perimeter/perimeter3/gameover_timer" )
     # ( "END TIMER DEBUG THINGS" )
     objective ( "act4_obj_1a",  "EOBJCMD_SHOW" )
     startConversation("act4/perimeter/perimeter3/4_perimeter3_0008" )
else
     # ( "The player is not allowed to live the perimeter platform until after the quest is done" )
     setRecallActive("FALSE" )
endif

