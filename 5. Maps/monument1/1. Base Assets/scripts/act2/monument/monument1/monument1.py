# Generated by BehavEd
# ( "monument1 load script" )
# ( "fear it" )
first_visit = getGameFlag("monument1", 1 )
if first_visit == 0
     act("kojakdoor", "kojakdoor" )
     setPartyLightColor(" 0.000 0.000 0.000 ", 0.000 )
     setGameFlag("monument1", 1, 1 )
     # ( "starts camera looking at door." )
     cameraToLocationAngles(" 2170.700 980.690 187.000 ", " 2208.020 1065.010 126.540 ", 0.000 )
     moveHeroesToEnt("first_visit" )
     lockControls(10.000 )
     # ( "open door, wait for it to open, move guys through door" )
     act("entry_door", "entry_door" )
     act("door_spawn", "door_spawn" )
     waittimed ( 7.000 )
     act("door_loop", "door_loop" )
     controlPlayerHeroWithAI(-1.000 )
     setWaypointPath("_HERO1_", "heroa", 1 )
     setWaypointPath("_HERO2_", "herob", 1 )
     setWaypointPath("_HERO3_", "heroc", 1 )
     setWaypointPath("_HERO4_", "herod", 1 )
     # ( "camera shifts behind hero while he runs out" )
     waittimed ( 0.250 )
     cameraFocusToEntity("wp_heroa01", 384.000, 45.000, 0.000, 2.000 )
     setPartyLightColor(" 0.760 0.570 0.000 ", 2.000 )
     waittimed ( 2.750 )
     controlPlayerHeroWithAI(0.100 )
     # ( "reset cam" )
     cameraResetOldSchool( )
     # ( "shows monument objectives and related opening conversation" )
     objective ( "act2_obj_3a",  "EOBJCMD_COMPLETE" )
     objective ( "act2_obj_5",  "EOBJCMD_SHOW" )
     objective ( "act2_obj_5a",  "EOBJCMD_SHOW" )
     objective ( "act2_obj_5b",  "EOBJCMD_SHOW" )
     startConversation("act2/monument/monument1/2_MONUMENT1_0020" )
else
     # ( "checks puzzle on return visits" )
     # ( "opens front door. CHANGE TO 'silent open' FUNCTION ONCE IT EXISTS" )
     act("entry_door", "entry_door" )
     # ( "first button" )
     puzzle_complete = getGameFlag("monument1", 2 )
     if puzzle_complete == 1
          # ( "remove button trigger spawn flame" )
          remove ( "butt_trig01", "butt_trig01" )
          setHintType("butt_01", "none" )
          # ( "...but no butt_sin, butt_tan, or butt_cos" )
          act("torchfire_01", "torchfire_01" )
          remove ( "statue_butt1", "statue_butt1" )
     endif
     # ( "second button" )
     puzzle_complete = getGameFlag("monument1", 3 )
     if puzzle_complete == 1
          # ( "remove button trigger spawn flame" )
          remove ( "butt_trig02", "butt_trig02" )
          setHintType("butt_02", "none" )
          act("torchfire_02", "torchfire_02" )
          remove ( "statue_butt2", "statue_butt2" )
     endif
     # ( "checks if quest is complete" )
     puzzle_complete = getObjective("act2_obj_5a", "COMPLETE" )
     if puzzle_complete == 1
          remove ( "kojakdoor", "kojakdoor" )
          remove ( "statue_butt1", "statue_butt1" )
          remove ( "statue_butt2", "statue_butt2" )
          # ( "remove mystic stone" )
          remove ( "mystic_stone", "mystic_stone" )
          # ( "remove button triggers and hinttypes" )
          remove ( "butt_trig01", "butt_trig01" )
          remove ( "butt_trig02", "butt_trig02" )
          setHintType("butt_01", "none" )
          setHintType("butt_02", "none" )
          # ( "grabbed stone and spawned guardian?" )
          puzzle_complete = getGameFlag("monument1", 4 )
          if puzzle_complete == 1
               remove ( "guardian_spawn", "guardian_spawn" )
               remove ( "guardian_statue", "guardian_statue" )
          endif
     else
          # ( "grabbed stone and spawned guardian?" )
          puzzle_complete = getGameFlag("monument1", 4 )
          if puzzle_complete == 1
               remove ( "mystic_stone", "mystic_stone" )
               # ( "if puzzle isn't complete, and guardian's been spawned, check zone persistance and respawn if needed" )
               zone_reset = getZoneReset( )
               if zone_reset == 1
                    act("kojakdoor", "kojakdoor" )
                    # ( "spawn the guardian" )
                    remove ( "guardian_statue", "guardian_statue" )
                    act("guardian_spawn", "guardian_spawn" )
               endif
          endif
     endif
endif

