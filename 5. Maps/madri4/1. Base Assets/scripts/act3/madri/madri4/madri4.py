# Generated by BehavEd
# ( "This sets all of the vars for the zone" )
setCurrentAct(3 )
gotheart = getObjective("act3_obj_6c_a", "COMPLETE" )
if gotheart == 1
     setEnable("link_madri1", "TRUE" )
     portal = getZoneReset( )
     if portal == 1
          act("portal_looper", "portal_looper" )
          remove ( "con_flame01", "con_flame01" )
          remove ( "artifact_heart_madri_a_mt01", "artifact_heart_madri_a_mt01" )
          remove ( "portal_spawn", "portal_spawn" )
     endif
endif
first_vist = getGameFlag("madri", 1 )
if first_vist == 0
     # ( "This sets all of the open doors for the first time" )
     # ( "These doors are for area1" )
     act("door_area1_a", "door_area1_a" )
     act("door_area1_b", "door_area1_b" )
     # ( "These doors are for area3" )
     act("door_area3_a", "door_area3_a" )
     act("door_area3_b", "door_area3_b" )
     # ( "These doors are for area2" )
     act("door_area5_a", "door_area5_a" )
     act("door_area5_b", "door_area5_b" )
     # ( "These doors are for area4" )
     act("door_area7_b", "door_area7_b" )
     act("door_area7_a", "door_area7_a" )
     # ( "Chamber doors" )
     # ( "The inner chamber is closed fromt he start" )
     act("door_chamber_a02", "door_chamber_a02" )
     act("door_chamber_b02", "door_chamber_b02" )
     act("door_chamber_c02", "door_chamber_c02" )
     act("door_chamber_d02", "door_chamber_d02" )
     # ( "*********************************************************************************" )
     # ( "This sets the door var so we can keep track of what doors are open" )
     # ( "*********************************************************************************" )
     setGameFlag("m_doors", 1, 1 )
     setGameFlag("m_doors", 2, 1 )
     setGameFlag("m_doors", 3, 1 )
     setGameFlag("m_doors", 4, 1 )
     setGameFlag("m_doors", 5, 1 )
     setGameFlag("m_doors", 6, 1 )
     setGameFlag("m_doors", 7, 1 )
     setGameFlag("m_doors", 8, 1 )
     # ( "*********************************************************************************" )
     # ( "This set which chamber doors are open" )
     # ( "*********************************************************************************" )
     # ( "Theses variable are also used to check track of which chamber doors are open" )
     # ( "m_doors 22 is chamber A" )
     setGameFlag("m_doors", 22, 0 )
     setGameFlag("m_doors", 10, 1 )
     # ( "m_doors 23 is chamber B" )
     setGameFlag("m_doors", 23, 0 )
     setGameFlag("m_doors", 11, 1 )
     # ( "m_doors 24 is chamber C" )
     setGameFlag("m_doors", 24, 0 )
     setGameFlag("m_doors", 12, 1 )
     # ( "m_doors 21 is chamber D" )
     setGameFlag("m_doors", 21, 0 )
     setGameFlag("m_doors", 9, 1 )
     # ( "*********************************************************************************" )
     # ( "This marks what areas are open from the start" )
     # ( "*********************************************************************************" )
     # ( "Area2" )
     setGameFlag("heart", 2, 0 )
     # ( "Area4" )
     setGameFlag("heart", 4, 0 )
     # ( "Area6" )
     setGameFlag("heart", 6, 0 )
     # ( "Area8" )
     setGameFlag("heart", 8, 0 )
     # ( "marking this 1 means the zone has been visited" )
     setGameFlag("madri", 1, 1 )
     # ( "This sets all of the decs" )
     act("open_path_decs", "open_path_decs" )
     # ( "This sets up the puzzle" )
     startConversation("act3/madri/madri4/3_MADRI4_0020" )
     objective ( "act3_obj_6c_a_1",  "EOBJCMD_SHOW" )
     objective ( "act3_obj_6c_a",  "EOBJCMD_HIDE" )
endif
doors = getObjective("act3_obj_6c_a_1", "COUNT" )
if doors == 1
     remove ( "doorA", "doorA" )
endif
if doors == 2
     remove ( "doorA", "doorA" )
     remove ( "doorB", "doorB" )
endif
if doors == 3
     remove ( "doorA", "doorA" )
     remove ( "doorB", "doorB" )
     remove ( "doorC", "doorC" )
endif
if doors == 4
     remove ( "doorA", "doorA" )
     remove ( "doorB", "doorB" )
     remove ( "doorC", "doorC" )
     remove ( "doorD", "doorD" )
endif
altar = getObjective("act3_obj_5b", "COMPLETE" )
if altar == 1
     swapInStump("stepford_altar_madri_b_mt01" )
endif

